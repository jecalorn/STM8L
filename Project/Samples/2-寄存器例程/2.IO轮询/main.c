/*******************************************************************************
*******************************蓝旗嵌入式系统***********************************
*************************http://lenchimcu.taobao.com****************************
*******************************************************************************/
#include"iostm8l152k4.h"

#define LED_PORT PC_ODR_ODR4  //LED端口
/*******************************************************************************
****入口参数：无
****出口参数：无
****函数备注：GPIO配置，配置PD4输出;PD4配置为输入，带上拉电阻；
****版权信息：蓝旗嵌入式系统
*******************************************************************************/
void Init_GPIO(void)
{
       PC_DDR_DDR4 = 1;//PD4输出
       PC_CR1_C14 = 1; //PD4推挽输出
       PC_CR2_C24 = 0; //输出速率2M
       
       PD_DDR_DDR4=0;//PB6输入
       PD_CR1_C14=1;//PB6上拉
}
/*******************************************************************************
****入口参数：无
****出口参数：无
****函数备注：主函数，一直检测PD4端口，如果是低电平，说明按键按下，反转LED
****版权信息：蓝旗嵌入式系统
*******************************************************************************/
int main( void )
{
    Init_GPIO();
    while(1)
    {
      if(PD_IDR_IDR4==0)//如果按键按下
      {
          LED_PORT^=1;//翻转LED端口电平
      }
    }
}
/*******************************************************************************
*******************************蓝旗嵌入式系统***********************************
*************************http://lenchimcu.taobao.com****************************
*******************************************************************************/